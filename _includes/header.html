<header class="site-header">

  <div class="wrapper-header">
    {% assign default_paths = site.pages | map: "path" %}
    {% assign page_paths = site.header_pages | default: default_paths %}
    <div class="header-left">
      <a class="site-title" href="{{ '/' | relative_url }}">
        <span class="title-m">Believe</span><span class="title-rcn">Obey</span> <span class="title-ski">Live</span>
      </a>
    </div>

    <div class="header-right">
      <!-- QR Code (only visible when printing) -->
      <img src="{{ '/assets/img/qr.svg' | relative_url }}" alt="QR Code" class="print-qr">

      <!-- Hamburger Menu -->
      <button class="hamburger hamburger--collapse" type="button">
        <span class="hamburger-box">
          <span class="hamburger-inner"></span>
        </span>
      </button>

      <div class="nav-links">
        <a href="{{ '/' | relative_url }}" class="nav-card">Home</a>
        <a href="{{ '/about/' | relative_url }}" class="nav-card">About</a>
        <a href="{{ '/more/' | relative_url }}" class="nav-card">More Topics</a>
        <a href="https://github.com/mrcnski/believeobey.live/commits/master/" class="nav-card">Updates</a>
        <a href="mailto:{{ site.email }}" class="nav-card">Contact</a>
      </div>
    </div>
  </div>

  <script>
   function initHamburger() {
       const hamburger = document.querySelector('.hamburger');
       if (!hamburger) return;

       let navbarVisible = false;

       function toggleNavbarMenu(force) {
           const navLinks = document.querySelector('.nav-links');
           if (!navLinks) return;

           function finishShow() {
               navLinks.style.opacity = "1";
           }
           function finishHide() {
               navLinks.style.display = "none";
           }

           if (force !== "hide" && (!navbarVisible || force === "show")) {
               navLinks.style.display = "block";
               if (force === "hide") {
                   finishShow()
               } else {
                   setTimeout(finishShow, 5);
               }
               navbarVisible = true;
           } else {
               navLinks.style.opacity = "0";
               if (force === "hide") {
                   finishHide();
               } else {
                   setTimeout(finishHide, 300);
               }
               navbarVisible = false;
           }
       }

       hamburger.addEventListener('click', () => {
           hamburger.classList.toggle('is-active');
           toggleNavbarMenu(null);
       });

       // Close dropdown when clicking outside
       document.addEventListener('click', (event) => {
           const navLinks = document.querySelector('.nav-links');
           if (!navLinks || !navbarVisible) return;

           // Check if click is outside both hamburger and nav-links
           if (!hamburger.contains(event.target) && !navLinks.contains(event.target)) {
               hamburger.classList.remove('is-active');
               toggleNavbarMenu();
           }
       });
   }

   // Run when the DOM is loaded
   document.addEventListener('DOMContentLoaded', initHamburger);
  </script>

</header>
